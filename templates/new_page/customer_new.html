{% extends "base.html" %}

{% block title %}Chỉnh sửa khách hàng - {{ customer.company_name }}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-12">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ url_for('admin') }}">Quản trị</a></li>
        <li class="breadcrumb-item"><a href="{{ url_for('admin') }}#customers">Khách hàng</a></li>
        <li class="breadcrumb-item active" aria-current="page">Chỉnh sửa #{{ customer.id }}</li>
      </ol>
    </nav>
    <h3>Chỉnh sửa khách hàng</h3>
  </div>
</div>

<form method="post" action="{{ url_for('new_customer') }}">
  <div class="card mt-3">
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Công ty</label>
          <input name="company_name" class="form-control" required value="{{ customer.company_name }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">Người liên hệ</label>
          <input name="contact_person" class="form-control" required value="{{ customer.contact_person or '' }}">
        </div>

        <div class="col-md-4">
          <label class="form-label">Điện thoại</label>
          <input name="phone" class="form-control" required value="{{ customer.phone or '' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">Email</label>
          <input name="email" type="email" class="form-control" value="{{ customer.email or '' }}">
        </div>
        <div class="col-md-4">
          <label class="form-label">Tỷ lệ NT/NS</label>
          <input name="water_ratio" type="number" step="0.01" required class="form-control" value="{{ '%.2f'|format(customer.water_ratio or 0) }}">
        </div>

        <div class="col-md-6">
          <label class="form-label">Địa chỉ</label>
          <input name="address" class="form-control" value="{{ customer.address or '' }}">
        </div>
        <div class="col-md-6">
          <label class="form-label">Khu vực</label>
          <select name="location" class="form-select">
            <option value="">-- Chọn khu vực --</option>
            <option value="Khu CN Phối Nối A" {% if customer.location == 'Khu CN Phối Nối A' %}selected{% endif %}>Khu CN Phối Nối A</option>
            <option value="Khu CN Phối Nối B" {% if customer.location == 'Khu CN Phối Nối B' %}selected{% endif %}>Khu CN Phối Nối B</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label">Ghi chú</label>
          <textarea name="notes" class="form-control form-control-sm" rows="3">{{ customer.notes or '' }}</textarea>
        </div>

        <div class="col-12 d-flex gap-3 align-items-center mt-2">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="daily_reading" name="daily_reading" {% if customer.daily_reading %}checked{% endif %}>
            <label class="form-check-label" for="daily_reading">Đọc số hàng ngày</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="is_active" name="is_active" {% if customer.is_active %}checked{% endif %}>
            <label class="form-check-label" for="is_active">Hoạt động</label>
          </div>
        </div>
      </div>
    </div>

    <div class="card-footer text-end">
      <a class="btn btn-secondary me-2" href="{{ url_for('admin') }}">Hủy</a>
      <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
    </div>
  </div>
</form>
{% endblock %}